<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Neon Block Shooter</title>
<style>
    body {
        background: #181c24;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        font-family: 'Segoe UI', Arial, sans-serif;
    }

    #game-container {
        background: #232a34;
        border-radius: 16px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        padding: 32px;
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
        gap: 12px;
    }

    #score {
        color: #fff;
        font-size: 1.3rem;
        font-weight: bold;
        text-shadow: 0 2px 8px #0004;
    }

    #game-canvas {
        background: linear-gradient(180deg, #2d3546 0%, #1a1e26 100%);
        border-radius: 12px;
        box-shadow: 0 4px 16px #0006;
        display: block;
        transition: box-shadow 0.2s;
    }

    #game-canvas.shoot {
        box-shadow: 0 0 32px 8px #00eaff88;
    }

    button {
        background: linear-gradient(90deg, #00eaff 0%, #0077ff 100%);
        color: #fff;
        border: none;
        border-radius: 8px;
        padding: 12px 32px;
        font-size: 1.1rem;
        font-weight: bold;
        cursor: pointer;
        box-shadow: 0 2px 8px #00eaff44;
        transition: background 0.2s, transform 0.1s;
    }

    button:hover {
        background: linear-gradient(90deg, #0077ff 0%, #00eaff 100%);
        transform: scale(1.05);
    }

    /* Overlay base */
    .overlay {
        position: absolute;
        inset: 0;
        background: rgba(24, 28, 36, 0.96);
        border-radius: 16px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 20px;
        transition: opacity 0.4s ease;
    }

    .hidden {
        opacity: 0;
        pointer-events: none;
    }

    h1, h2 {
        color: #00eaff;
        text-shadow: 0 0 12px #00eaff66;
        margin: 0;
    }

    p {
        color: #ccc;
        text-align: center;
        max-width: 280px;
        font-size: 1rem;
    }

    .menu-buttons {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    #final-score {
        color: #00eaff;
        font-weight: bold;
    }
</style>
</head>
<body>
<div id="game-container">
    <div id="score">Score: 0</div>
    <canvas id="game-canvas" width="400" height="600"></canvas>

    <!-- Main Menu -->
    <div id="menu" class="overlay">
        <h1>Neon Block Shooter</h1>
        <p>Use <b>A</b> and <b>D</b> to move.<br>Press <b>F</b> to shoot.<br>Destroy blocks before they hit you.</p>
        <div class="menu-buttons">
            <button id="play-btn">Start Game</button>
            <button id="exit-btn">Return to Index</button>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="game-over" class="overlay hidden">
        <h2>Game Over</h2>
        <p id="final-score">Score: 0</p>
        <div class="menu-buttons">
            <button id="restart-btn">Restart</button>
            <button id="back-menu-btn">Back to Menu</button>
            <button id="exit-btn-over">Return to Index</button>
        </div>
    </div>
</div>

<script>
const canvas = document.getElementById('game-canvas');
const ctx = canvas.getContext('2d');
const scoreEl = document.getElementById('score');
const menu = document.getElementById('menu');
const gameOverScreen = document.getElementById('game-over');
const playBtn = document.getElementById('play-btn');
const restartBtn = document.getElementById('restart-btn');
const backMenuBtn = document.getElementById('back-menu-btn');
const finalScoreEl = document.getElementById('final-score');
const exitBtns = [document.getElementById('exit-btn'), document.getElementById('exit-btn-over')];

const player = {
    x: canvas.width / 2 - 25,
    y: canvas.height - 60,
    width: 50,
    height: 20,
    color: '#00eaff',
    speed: 6
};

let bullets = [];
let blocks = [];
let score = 0;
let gameActive = false;
let animationId = null;
let blockSpawnTimer = null;
let leftPressed = false, rightPressed = false;

function drawPlayer() {
    ctx.save();
    ctx.shadowColor = "#00eaff";
    ctx.shadowBlur = 16;
    ctx.fillStyle = player.color;
    ctx.fillRect(player.x, player.y, player.width, player.height);
    ctx.restore();
}

function drawBullets() {
    bullets.forEach(bullet => {
        ctx.save();
        ctx.shadowColor = "#fff";
        ctx.shadowBlur = 8;
        ctx.fillStyle = "#fff";
        ctx.fillRect(bullet.x, bullet.y, bullet.width, bullet.height);
        ctx.restore();
    });
}

function drawBlocks() {
    blocks.forEach(block => {
        ctx.save();
        ctx.globalAlpha = block.hitAnim ? 0.6 : 1;
        ctx.shadowColor = "#ff3c6e";
        ctx.shadowBlur = block.hitAnim ? 16 : 0;
        ctx.fillStyle = block.color;
        ctx.fillRect(block.x, block.y, block.width, block.height);
        ctx.restore();
    });
}

function spawnBlock() {
    const blockWidth = 60;
    const blockHeight = 30;
    const x = Math.random() * (canvas.width - blockWidth);
    const color = `hsl(${Math.random()*360}, 80%, 60%)`;
    blocks.push({ x, y: -blockHeight, width: blockWidth, height: blockHeight, color, hitAnim: false });
}

function update() {
    bullets.forEach(bullet => bullet.y -= bullet.speed);
    bullets = bullets.filter(bullet => bullet.y + bullet.height > 0);

    blocks.forEach(block => block.y += 2 + score * 0.03);
    blocks = blocks.filter(block => block.y < canvas.height);

    bullets.forEach((bullet, bi) => {
        blocks.forEach((block, blki) => {
            if (bullet.x < block.x + block.width &&
                bullet.x + bullet.width > block.x &&
                bullet.y < block.y + block.height &&
                bullet.y + bullet.height > block.y) {
                block.hitAnim = true;
                setTimeout(() => block.hitAnim = false, 120);
                bullets.splice(bi, 1);
                blocks.splice(blki, 1);
                score++;
                scoreEl.textContent = "Score: " + score;
            }
        });
    });

    for (let block of blocks) {
        if (block.y + block.height > player.y &&
            block.x < player.x + player.width &&
            block.x + block.width > player.x) {
            gameOver();
            return;
        }
    }
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawPlayer();
    drawBullets();
    drawBlocks();
}

function loop() {
    update();
    draw();
    if (gameActive) animationId = requestAnimationFrame(loop);
}

function shoot() {
    bullets.push({
        x: player.x + player.width / 2 - 4,
        y: player.y - 12,
        width: 8,
        height: 16,
        speed: 10
    });
    canvas.classList.add('shoot');
    setTimeout(() => canvas.classList.remove('shoot'), 80);
}

function resetGame() {
    bullets = [];
    blocks = [];
    score = 0;
    scoreEl.textContent = "Score: 0";
    player.x = canvas.width / 2 - player.width / 2;
}

function movePlayer() {
    if (leftPressed) player.x -= player.speed;
    if (rightPressed) player.x += player.speed;
    player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
}

function blockSpawner() {
    if (!gameActive) return;
    spawnBlock();
    let interval = Math.max(400 - score * 10, 120);
    blockSpawnTimer = setTimeout(blockSpawner, interval);
}

function gameOver() {
    gameActive = false;
    cancelAnimationFrame(animationId);
    clearTimeout(blockSpawnTimer);
    finalScoreEl.textContent = "Score: " + score;
    gameOverScreen.classList.remove('hidden');
}

function startGame() {
    resetGame();
    gameActive = true;
    menu.classList.add('hidden');
    gameOverScreen.classList.add('hidden');
    loop();
    blockSpawner();
}

function returnToMenu() {
    resetGame();
    menu.classList.remove('hidden');
    gameOverScreen.classList.add('hidden');
}

document.addEventListener('keydown', e => {
    if (e.code === 'KeyA') leftPressed = true;
    if (e.code === 'KeyD') rightPressed = true;
    if ((e.code === 'KeyF' || e.code === 'ArrowUp') && gameActive) shoot();
});
document.addEventListener('keyup', e => {
    if (e.code === 'KeyA') leftPressed = false;
    if (e.code === 'KeyD') rightPressed = false;
});

setInterval(() => {
    if (gameActive) movePlayer();
}, 16);

// Event bindings
playBtn.onclick = startGame;
restartBtn.onclick = startGame;
backMenuBtn.onclick = returnToMenu;
exitBtns.forEach(btn => {
    btn.onclick = () => {
        window.location.href = "index.html"; // Redirect to your main file
    };
});
</script>
</body>
</html>
